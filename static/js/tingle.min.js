!function(t,o){"function"==typeof define&&define.amd?define(o):"object"==typeof exports?module.exports=o():t.tingle=o()}(this,function(){function t(t){this.modal,this.modalCloseBtn,this.modalWrapper,this.modalBox,this.modalBoxContent,this.modalBoxFooter,this.modalContent;var o={onClose:null,onOpen:null,stickyFooter:!1,footer:!1,cssClass:[]};this.opts=c({},o,t),this.init()}function o(){this.modalBoxFooter&&(this.modalBoxFooter.style.width=this.modalBox.clientWidth+"px",this.modalBoxFooter.style.left=this.modalBox.offsetLeft+"px")}function i(){if(this.isOverflow())this.modalBox.style.top="";else{var t=window.innerHeight/2-this.modalBox.clientHeight/2;this.modalBox.style.top=t+"px"}}function e(){p(this.modal)}function n(){this.modal=B("div","tingle-modal"),this.modal.style.display="none",this.opts.cssClass.forEach(function(t){"string"==typeof t&&this.modal.classList.add(t)},this),this.modalCloseBtn=B("button","tingle-modal__close"),this.modalCloseBtn.innerHTML="Ã—",this.modalBox=B("div","tingle-modal-box"),this.modalBoxContent=B("div","tingle-modal-box__content"),this.modalBox.appendChild(this.modalBoxContent),this.modal.appendChild(this.modalCloseBtn),this.modal.appendChild(this.modalBox)}function s(){this.modalBoxFooter=B("div","tingle-modal-box__footer"),this.modalBox.appendChild(this.modalBoxFooter)}function l(t){for(var o=t.getElementsByTagName("img"),i=[],e=0;e<o.length;e++)i.push(o[e].src)}function a(){document.querySelector(".tingle-modal")&&f(this.modal)}function d(){u(this.modalCloseBtn,"click",this.close.bind(this)),u(this.modal,"click",this.close.bind(this)),u(this.modalBox,"click",r),window.addEventListener("resize",this.resize.bind(this))}function r(t){t.stopPropagation()}function h(){x(this.modalCloseBtn,"click",this.close.bind(this)),x(this.modal,"click",this.close.bind(this)),x(this.modalBox,"click",r)}function c(){for(var t=1;t<arguments.length;t++)for(var o in arguments[t])arguments[t].hasOwnProperty(o)&&(arguments[0][o]=arguments[t][o]);return arguments[0]}function m(t){return"undefined"!=typeof t.length&&"undefined"!=typeof t.item}function p(t){document.body.insertBefore(t,document.body.firstChild)}function f(t){t.parentNode.removeChild(t)}function u(t,o,i){m(t)?[].forEach.call(t,function(t){t.addEventListener(o,i)}):t.addEventListener(o,i)}function x(t,o,i){m(t)?[].forEach.call(t,function(t){t.removeEventListener(o,i)}):t.removeEventListener(o,i)}function B(t,o){var t=document.createElement(t);return o&&t.classList.add(o),t}function y(){var t,o=document.createElement("tingle-test-transition"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==o.style[t])return i[t]}var g=document.querySelector("body");return t.prototype.init=function(){this.modal||(n.call(this),d.call(this),e.call(this),this.opts.footer&&this.addFooter())},t.prototype.open=function(t){if(this.modal.style.display="block",g.classList.add("tingle-enabled"),this.setStickyFooter(this.opts.stickyFooter),this.modal.classList.add("tingle-modal--visible"),i.call(this),"function"==typeof this.opts.onOpen){var o=y(),e=this;o&&this.modal.addEventListener(o,function(t){"transform"==t.propertyName&&e.opts.onOpen.call(e)})}},t.prototype.close=function(t){this.modal.style.display="none",g.classList.remove("tingle-enabled"),this.modal.classList.remove("tingle-modal--visible"),"function"==typeof this.opts.onClose&&this.opts.onClose.call(this)},t.prototype.destroy=function(){null!==this.modal&&(h.call(this),a.call(this),this.modal=null)},t.prototype.setContent=function(t){"string"==typeof t?this.modalBoxContent.innerHTML=t:(this.modalBoxContent.innerHTML="",this.modalBoxContent.appendChild(t)),l(this.modalBoxContent),this.resize()},t.prototype.getContent=function(){return this.modalBoxContent},t.prototype.addFooter=function(){s.call(this)},t.prototype.setFooterContent=function(t){this.modalBoxFooter.innerHTML=t},t.prototype.getFooterContent=function(){return this.modalBoxFooter},t.prototype.setStickyFooter=function(t){this.isOverflow()||(t=!1),t?this.modalBox.contains(this.modalBoxFooter)&&(this.modalBox.removeChild(this.modalBoxFooter),this.modal.appendChild(this.modalBoxFooter),this.modalBoxFooter.classList.add("tingle-modal-box__footer--sticky"),o.call(this),this.modalBoxContent.style["padding-bottom"]=this.modalBoxFooter.clientHeight+20+"px",u(this.modalBoxFooter,"click",r)):this.modalBoxFooter&&(this.modalBox.contains(this.modalBoxFooter)||(this.modal.removeChild(this.modalBoxFooter),this.modalBox.appendChild(this.modalBoxFooter),this.modalBoxFooter.style.width="auto",this.modalBoxFooter.style.left="",this.modalBoxContent.style["padding-bottom"]="",this.modalBoxFooter.classList.remove("tingle-modal-box__footer--sticky")))},t.prototype.addFooterBtn=function(t,o,i){var e=document.createElement("button");return e.innerHTML=t,e.addEventListener("click",i),"string"==typeof o&&o.length&&o.split(" ").forEach(function(t){e.classList.add(t)}),this.modalBoxFooter.appendChild(e),e},t.prototype.resize=function(){this.modal.classList.contains("tingle-modal--visible")&&(i.call(this),o.call(this),!this.isOverflow()&&this.opts.stickyFooter?this.setStickyFooter(!1):this.isOverflow()&&this.opts.stickyFooter&&this.setStickyFooter(!0))},t.prototype.isOverflow=function(){var t=window.innerHeight,o=this.modalBox.clientHeight,i=t>o?!1:!0;return i},{modal:t}});